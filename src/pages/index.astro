---
import BaseLayout from '../layouts/BaseLayout.astro';
import PostCard from '../components/PostCard.astro';

const allPosts = await Astro.glob('../blog/**/*.md');
const sortedPosts = allPosts
  .sort((a, b) => new Date(b.frontmatter.pubDate).getTime() - new Date(a.frontmatter.pubDate).getTime())
  .slice(0, 6);

const categories = [
  { slug: 'lifestyle', label: 'ë¼ì´í”„ìŠ¤íƒ€ì¼', emoji: 'âœ¨', desc: 'ë” ë‚˜ì€ ì‚¶ì„ ìœ„í•œ ìŠµê´€ê³¼ íŒ' },
  { slug: 'finance', label: 'ê¸ˆìœµ', emoji: 'ğŸ’°', desc: 'ì¬í…Œí¬ì™€ ìì‚° ê´€ë¦¬' },
  { slug: 'health', label: 'ê±´ê°•', emoji: 'ğŸ’ª', desc: 'ìš´ë™ê³¼ ì˜ì–‘ ê´€ë¦¬' },
  { slug: 'education', label: 'êµìœ¡', emoji: 'ğŸ“š', desc: 'ìê¸°ê³„ë°œê³¼ í•™ìŠµë²•' },
  { slug: 'travel', label: 'ì—¬í–‰', emoji: 'âœˆï¸', desc: 'êµ­ë‚´ì™¸ ì—¬í–‰ ì •ë³´' },
];
---

<BaseLayout
  title="LifeFlow - ë” ë‚˜ì€ ì‚¶ì„ ìœ„í•œ ì¸ì‚¬ì´íŠ¸"
  description="ë¼ì´í”„ìŠ¤íƒ€ì¼, ê¸ˆìœµ, ê±´ê°•, êµìœ¡, ì—¬í–‰ ìµœì‹  ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ë¸”ë¡œê·¸"
>
  <!-- JSON-LD ItemList for SEO -->
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "ItemList",
    "itemListElement": sortedPosts.map((post, i) => {
      const slug = post.file.replace(/\\/g, '/').split('/').pop().replace('.md', '');
      return {
        "@type": "ListItem",
        "position": i + 1,
        "url": `https://life-revenue-blog.vercel.app/blog/${slug}/`
      };
    })
  })} />

  <div class="home-hero" aria-label="ì‚¬ì´íŠ¸ ì†Œê°œ">
    <h1 class="hero-title">LifeFlow</h1>
    <p class="hero-subtitle">ë” ë‚˜ì€ ì‚¶ì„ ìœ„í•œ ì¸ì‚¬ì´íŠ¸</p>
    <p class="hero-desc">ê¸ˆìœµ, ê±´ê°•, êµìœ¡, ì—¬í–‰, ë¼ì´í”„ìŠ¤íƒ€ì¼ ìµœì‹  ì •ë³´</p>
  </div>

  <section class="category-quick-links" aria-label="ì¹´í…Œê³ ë¦¬ ë‘˜ëŸ¬ë³´ê¸°">
    <div class="category-chips">
      {categories.map(cat => (
        <a href={`/blog/${cat.slug}/`} class="category-chip">
          <span>{cat.emoji}</span> {cat.label}
        </a>
      ))}
    </div>
  </section>

  <section class="latest-posts" aria-label="ìµœì‹  ê¸€ ëª©ë¡">
    <h2 class="section-title">ìµœì‹  ê¸€</h2>
    <div class="posts-grid">
      {sortedPosts.map(post => {
        const slug = post.file.replace(/\\/g, '/').split('/').pop().replace('.md', '');
        return (
        <PostCard
          title={post.frontmatter.title}
          description={post.frontmatter.description}
          pubDate={post.frontmatter.pubDate}
          category={post.frontmatter.category}
          slug={slug}
          image={post.frontmatter.heroImage ? { url: post.frontmatter.heroImage, alt: post.frontmatter.title } : undefined}
          tags={post.frontmatter.tags}
        />
        );})}
    </div>
    <div class="view-all">
      <a href="/blog/" class="btn-primary">ì „ì²´ ê¸€ ë³´ê¸° â†’</a>
    </div>
  </section>
</BaseLayout>

<style>
.home-hero {
  text-align: center;
  padding: 4rem 1rem;
  background: linear-gradient(135deg, #fce7f3 0%, #e0f2fe 100%);
  border-radius: 16px;
  margin-bottom: 3rem;
}

:root.dark .home-hero {
  background: linear-gradient(135deg, #831843 0%, #164e63 100%);
}

.hero-title {
  font-size: 3rem;
  font-weight: 800;
  margin-bottom: 0.5rem;
  background: linear-gradient(135deg, #ec4899 0%, #3b82f6 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.hero-subtitle {
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 0.5rem;
}

.hero-desc {
  font-size: 1.125rem;
  color: var(--color-text-secondary);
}

.section-title {
  font-size: 1.75rem;
  font-weight: 700;
  margin-bottom: 1.5rem;
  color: var(--color-text);
}

.category-quick-links {
  margin-bottom: 2rem;
}

.category-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  justify-content: center;
}

.category-chip {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.5rem 1rem;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 999px;
  text-decoration: none;
  color: var(--color-text);
  font-size: 0.9rem;
  font-weight: 600;
  white-space: nowrap;
  transition: all 0.2s;
}

.category-chip:hover {
  background: var(--color-primary);
  color: white;
  border-color: var(--color-primary);
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.latest-posts {
  margin-bottom: 3rem;
}

.posts-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2rem;
}

.view-all {
  text-align: center;
}

.btn-primary {
  display: inline-block;
  padding: 0.75rem 2rem;
  background: var(--color-primary);
  color: white;
  text-decoration: none;
  border-radius: 8px;
  font-weight: 600;
  transition: all 0.2s;
}

.btn-primary:hover {
  background: var(--color-primary-dark);
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

@media (max-width: 768px) {
  .hero-title {
    font-size: 2rem;
  }
  .hero-subtitle {
    font-size: 1.25rem;
  }
  .category-chips {
    gap: 0.4rem;
  }
  .posts-grid {
    grid-template-columns: 1fr;
  }
}
</style>
